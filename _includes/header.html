<header class="header">
  <div class="container header-inner">
    <a class="logo" href="/">Iker Elvi</a>

    <button class="nav-toggle" type="button"
            aria-label="Open menu"
            aria-controls="site-nav"
            aria-expanded="false">
      <span></span><span></span><span></span>
    </button>

    <nav id="site-nav" class="nav">
      {% for item in site.data.navigation %}
        <a href="{{ item.url }}">{{ item.title }}</a>
      {% endfor %}
    </nav>
  </div>
</header>

<script>
  (function () {
    const btn = document.querySelector(".nav-toggle");
    const nav = document.getElementById("site-nav");
    if (!btn || !nav) return;

    function closeMenu() {
      btn.setAttribute("aria-expanded", "false");
      nav.classList.remove("open");
    }

    btn.addEventListener("click", () => {
      const isOpen = btn.getAttribute("aria-expanded") === "true";
      btn.setAttribute("aria-expanded", String(!isOpen));
      nav.classList.toggle("open", !isOpen);
    });

    // Cerrar al hacer click en un link
    nav.addEventListener("click", (e) => {
      if (e.target.tagName === "A") closeMenu();
    });

    // Cerrar con Escape
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") closeMenu();
    });

    // Cerrar si pasas a desktop (por si rotas pantalla)
    window.addEventListener("resize", () => {
      if (window.innerWidth > 760) closeMenu();
    });
  })();
</script>
